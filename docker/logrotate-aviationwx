# Logrotate configuration for AviationWX application logs
# Rotates cron job logs and Apache logs
# Keeps 1 rotated file (100MB max per file), compresses old logs

/var/log/aviationwx/*.log {
    daily
    rotate 1
    compress
    delaycompress
    missingok
    notifempty
    create 0644 www-data www-data
    sharedscripts
    postrotate
        # Reload services if needed (optional)
        # Apache doesn't need reload for log rotation
        # Cron jobs will continue writing to new file automatically
    endscript
}

# Apache access and error logs
/var/log/aviationwx/apache-access.log
/var/log/aviationwx/apache-error.log {
    daily
    rotate 1
    compress
    delaycompress
    missingok
    notifempty
    create 0644 www-data www-data
    sharedscripts
    postrotate
        # Apache will continue writing to new file automatically
        # No reload needed for log rotation
    endscript
}

# Service watchdog log
/var/log/aviationwx/service-watchdog.log {
    daily
    rotate 1
    compress
    delaycompress
    missingok
    notifempty
    create 0644 root root
}

# PHP application logs
/var/log/aviationwx/app.log
/var/log/aviationwx/user.log
/var/log/aviationwx/php-error.log {
    daily
    rotate 1
    compress
    delaycompress
    missingok
    notifempty
    create 0644 www-data www-data
}

# Debug log
/var/log/aviationwx/debug.log {
    daily
    rotate 1
    compress
    delaycompress
    missingok
    notifempty
    create 0644 www-data www-data
}

