# Deployment Guide

This project is deployed via Docker on a DigitalOcean Droplet (or any VPS) using Docker Compose and an optional Nginx reverse proxy with Certbot for TLS.

Start here:
- See [DOCKER_DEPLOYMENT.md](DOCKER_DEPLOYMENT.md) for a full step-by-step guide (Droplet creation, Docker install, SSL, DNS, and GitHub Actions SSH deploy).

Quick notes:
- Mount `airports.json` on the host and point the app via `CONFIG_PATH` or by bind-mounting it into the container (read-only).
- Use host cron to refresh webcam caches, for example:
  ```bash
  */1 * * * * curl -s http://127.0.0.1:8080/fetch-webcam-safe.php > /dev/null 2>&1
  ```
- Configure wildcard DNS by adding A records for `@` and `*` to your droplet IP.
- Nginx handles HTTPS redirects and wildcard subdomains; certificates are mounted into the `nginx` container at `/etc/nginx/ssl`.

For local development, see [LOCAL_SETUP.md](LOCAL_SETUP.md).

## Notes on Caching and Staleness

- Weather data is cached server-side and includes `last_updated` in API responses. UI highlights red when older than 1 hour.
- Webcam images are cached on disk and regenerated by a cron job. Multiple formats (AVIF/WEBP/JPEG) are generated for efficient delivery with fallback.

